<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Acta de Seguimiento Institucional</title>
    <style>
        @page {
            size: A4;
            margin: 2.5cm; /* M치rgenes est치ndar para documentos oficiales */
            @bottom-center {
                content: "P치gina " counter(page) " de " counter(pages);
                font-family: serif;
                font-size: 10pt;
            }
        }
        
        body {
            font-family: "Times New Roman", serif;
            font-size: 12pt;
            line-height: 1.5;
            color: #000;
        }

        /* === HEADER / ENCABEZADO === */
        .header-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
        }
        .header-table td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
            vertical-align: middle;
        }
        .logo-img {
            max-width: 80px;
            max-height: 80px;
            object-fit: contain;
        }
        .logo-placeholder {
            font-size: 20px;
            font-weight: bold;
            color: #ccc;
        }

        /* === SECCIONES === */
        .title-box {
            background-color: #f0f0f0;
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
            font-weight: bold;
            text-transform: uppercase;
            margin-top: 20px;
            margin-bottom: 15px;
            font-size: 11pt;
        }

        .info-grid {
            width: 100%;
            margin-bottom: 20px;
        }
        .info-row {
            margin-bottom: 8px;
            border-bottom: 1px dotted #999;
            padding-bottom: 2px;
            display: block; /* Asegura estructura de bloque */
        }
        .label {
            font-weight: bold;
            width: 180px;
            display: inline-block;
        }

        /* === CONTENIDO PRINCIPAL === */
        .content-box {
            border: 1px solid #000;
            padding: 15px;
            min-height: 350px; /* Altura m칤nima para que se vea formal */
            text-align: justify;
            margin-bottom: 40px;
            white-space: pre-wrap; /* 游댠 CR칈TICO: Respeta los saltos de l칤nea de la BD */
            font-size: 12pt;
        }

        /* === FIRMAS === */
        .signatures {
            width: 100%;
            margin-top: 80px;
            page-break-inside: avoid; /* Evita que las firmas queden cortadas entre p치ginas */
        }
        .sig-box {
            width: 40%;
            float: left;
            text-align: center;
            border-top: 1px solid #000;
            padding-top: 5px;
        }
        /* Utilidad para limpiar los floats */
        .clearfix::after {
            content: "";
            clear: both;
            display: table;
        }

        /* === FOOTER === */
        .footer {
            margin-top: 50px;
            text-align: center;
            font-size: 9pt;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 5px;
        }
    </style>
</head>
<body>

    <table class="header-table">
        <tr>
            <td rowspan="3" style="width: 20%;">
                {% if institucion.logo %}
                    <img src="{{ institucion.logo.url }}" class="logo-img" alt="Logo Institucional">
                {% else %}
                    <div class="logo-placeholder">LOGO</div>
                {% endif %}
            </td>
            <td rowspan="2" style="width: 50%; font-size: 14pt; font-weight: bold;">
                {{ institucion.nombre|default:"INSTITUCI칍N EDUCATIVA"|upper }}
            </td>
            <td style="width: 30%; font-size: 9pt;">C칍DIGO: G-SGC-001</td>
        </tr>
        <tr>
            <td style="font-size: 9pt;">VERSI칍N: 2.0</td>
        </tr>
        <tr>
            <td style="font-weight: bold; font-size: 11pt;">ACTA DE SEGUIMIENTO: {{ seguimiento.get_tipo_display|upper }}</td>
            <td style="font-size: 9pt;">
                FECHA IMPRESI칍N:<br>{{ fecha_impresion|date:"d/m/Y H:i" }}
            </td>
        </tr>
    </table>

    <div class="title-box">I. INFORMACI칍N GENERAL</div>
    
    <div class="info-grid">
        <div class="info-row">
            <span class="label">Estudiante:</span> {{ estudiante.get_full_name|default:estudiante.username|upper }}
        </div>
        <div class="info-row">
            <span class="label">Identificaci칩n (ID):</span> {{ estudiante.username }}
        </div>
        <div class="info-row">
            <span class="label">Fecha del Suceso:</span> {{ seguimiento.fecha|date:"l, d \d\e F \d\e Y"|capfirst }}
        </div>
        <div class="info-row">
            <span class="label">Profesional a Cargo:</span> {{ profesional.get_full_name|default:profesional.username|upper }}
        </div>
        <div class="info-row">
            <span class="label">Cargo/Rol:</span> {{ profesional.perfil.get_rol_display|default:"Docente/Administrativo" }}
        </div>
    </div>

    <div class="title-box">II. DESARROLLO DE LA SESI칍N Y COMPROMISOS</div>
    
    <div class="content-box">
{{ seguimiento.descripcion }}
    </div>

    <div class="signatures clearfix">
        <div class="sig-box">
            <br>
            <strong>{{ estudiante.get_full_name|default:"Estudiante" }}</strong><br>
            Firma del Estudiante
        </div>
        <div class="sig-box" style="float: right;">
            <br>
            <strong>{{ profesional.get_full_name|default:"Profesional" }}</strong><br>
            Firma del Profesional
        </div>
    </div>

    <div class="footer">
        {{ institucion.direccion|default:"Direcci칩n Principal" }} | {{ institucion.telefono|default:"Tel칠fono de Contacto" }} | {{ institucion.ciudad|default:"Ciudad" }}<br>
        <em>Este documento es confidencial y de uso exclusivo institucional. Generado por Sistema Stratos. ID: {{ seguimiento.id }}</em>
    </div>

</body>
</html>