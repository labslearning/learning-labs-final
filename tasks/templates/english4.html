{% extends 'base.html' %}
{% load static %}

{% block content %}
<main class="container py-5 main-content-area">
    <section class="text-center mb-5 page-header">
        <h1 class="display-4 page-title-game">
            <i class="fas fa-gamepad me-2"></i>Zona de Juegos Educativos
        </h1>
        <p class="lead page-subtitle-game">
            Aprende robótica de forma divertida con nuestros juegos interactivos.
        </p>
    </section>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4 g-md-5 lesson-grid">
        <div class="col">
            <div class="card h-100 game-card">
                <div class="card-body text-center d-flex flex-column">
                    <h5 class="card-title-game">Kahoot de Robótica</h5>
                    <p class="card-text-game">
                        Pon a prueba tus conocimientos de robótica con este divertido y competitivo quiz.
                    </p>
                    <button class="btn btn-game-primary btn-lg mt-auto card-button" 
                            onclick="openGameModal('https://create.kahoot.it/share/robotics/7e4ea9ef-20ea-4212-ab6c-40db7bcdf622', 'Kahoot de Robótica', 'Para jugar a este quiz, serás redirigido a la página de Kahoot en una nueva pestaña.')">
                        <i class="fas fa-play-circle me-2"></i>Jugar Ahora
                    </button>
                </div>
            </div>
        </div>
        
        <div class="col">
            <div class="card h-100 game-card">
                <div class="card-body text-center d-flex flex-column">
                    <h5 class="card-title-game">Juego 2: Futuro Juego</h5>
                    <p class="card-text-game">
                        Descripción de tu próximo juego para que los estudiantes se diviertan aprendiendo.
                    </p>
                    <button class="btn btn-game-primary btn-lg mt-auto card-button" 
                            onclick="openGameModal('TU_OTRA_URL_DE_JUEGO', 'Próximo Juego', 'Para jugar a este juego, serás redirigido a una nueva pestaña.')">
                        <i class="fas fa-play-circle me-2"></i>Jugar Ahora
                    </button>
                </div>
            </div>
        </div>
        </div>
</main>

<div class="modal fade game-info-modal" id="gameInfoModal" tabindex="-1" aria-labelledby="gameInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-header">
                <h5 class="modal-title" id="gameInfoModalLabel">
                    <i class="fas fa-external-link-alt me-2"></i>
                    <span id="gameModalTitle">Jugar Ahora</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <h6 class="fw-bold" id="gameModalDescription"></h6>
                <p class="mt-3 text-muted">
                    Se abrirá una nueva pestaña del navegador para el juego.
                </p>
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <a id="gameModalLink" href="#" target="_blank" class="btn btn-primary">
                    <i class="fas fa-gamepad me-2"></i>Ir al Juego
                </a>
            </div>
        </div>
    </div>
</div>

<style>
/* --- Variables Globales de Diseño para la sección de juegos --- */
:root {
    --game-primary-color: #f73a5a; /* Rojo vibrante */
    --game-primary-hover: #e02c4b;
    --game-secondary-color: #007bff; /* Azul de apoyo */
    --game-secondary-hover: #0056b3;
    --game-page-bg: #f0f2f5; /* Fondo más claro */
    --game-card-bg: #ffffff;
    --game-card-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    --game-card-hover-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    --game-text-dark: #212529;
    --game-text-muted: #6c757d;
    --game-radius-lg: 1rem;
    --game-radius-sm: 0.5rem;
    --game-font-primary: 'Poppins', sans-serif;
    --game-font-secondary: 'Roboto', sans-serif;
}

/* --- Estilos Globales para la página de juegos --- */
.page-title-game {
    font-family: var(--game-font-primary);
    color: var(--game-primary-color);
    font-weight: 700;
    margin-bottom: 0.75rem;
    font-size: 2.8rem;
}
.page-subtitle-game {
    font-size: 1.2rem;
    color: var(--game-text-muted);
    max-width: 750px;
    margin-left: auto;
    margin-right: auto;
    font-weight: 400;
    line-height: 1.7;
}

/* --- Tarjetas de juego (Cards) --- */
.game-card {
    background-color: var(--game-card-bg);
    border: none;
    border-radius: var(--game-radius-lg);
    box-shadow: var(--game-card-shadow);
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    cursor: pointer;
}
.game-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--game-card-hover-shadow);
}
.game-card .card-body {
    padding: 2rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    text-align: center;
}
.card-title-game {
    font-family: var(--game-font-primary);
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--game-text-dark);
    margin-bottom: 0.75rem;
}
.card-text-game {
    color: var(--game-text-muted);
    font-size: 1rem;
    flex-grow: 1;
    margin-bottom: 2rem;
    line-height: 1.6;
}
.btn-game-primary {
    font-family: var(--game-font-primary);
    font-weight: 600;
    font-size: 1.1rem;
    padding: 0.9rem 2rem;
    border-radius: var(--game-radius-sm);
    background-color: var(--game-primary-color);
    border-color: var(--game-primary-color);
    color: white;
    transition: background-color 0.25s ease, border-color 0.25s ease;
    align-self: center;
    box-shadow: 0 4px 10px rgba(247, 58, 90, 0.2);
}
.btn-game-primary:hover {
    background-color: var(--game-primary-hover);
    border-color: var(--game-primary-hover);
    box-shadow: 0 6px 15px rgba(247, 58, 90, 0.3);
}

/* --- Estilos para el nuevo modal --- */
.game-info-modal .modal-content {
    border-radius: 1rem;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
}
.game-info-modal .modal-header {
    border-bottom: none;
}
.game-info-modal .modal-title {
    font-weight: bold;
    color: var(--game-primary-color);
}
.game-info-modal .modal-footer {
    border-top: none;
}
.game-info-modal .modal-footer .btn-primary {
    background-color: var(--game-primary-color);
    border-color: var(--game-primary-color);
}
</style>

<script>
// Lógica para el modal informativo
document.addEventListener('DOMContentLoaded', function() {
    const gameModal = new bootstrap.Modal(document.getElementById('gameInfoModal'));
    const gameModalTitleEl = document.getElementById('gameModalTitle');
    const gameModalDescriptionEl = document.getElementById('gameModalDescription');
    const gameModalLinkEl = document.getElementById('gameModalLink');

    window.openGameModal = function(gameUrl, gameTitle, gameDescription) {
        if (!gameModalTitleEl || !gameModalDescriptionEl || !gameModalLinkEl) {
            console.error("Error: Elementos del modal de juego no encontrados.");
            return;
        }
        
        gameModalTitleEl.textContent = gameTitle;
        gameModalDescriptionEl.textContent = gameDescription;
        gameModalLinkEl.href = gameUrl;
        
        gameModal.show();
    }
});
</script>
{% endblock %}